Ignore the TEI header.
Do not use metadata such as <teiHeader>, publication info, licence, revision history, etc.
Only use the actual document text inside <text><body><div type="doc">.

Clean the XML content.
Remove elements that should not be part of the training text, such as:

<note>

<unclear>

<orig> (if you donâ€™t need archival references)

Keep the real paragraph text.

Extract entity annotations.
For each:

<persName ref="...">

<placeName ref="...">

Extract:

the mention text (the content of the tag)

the entity ID (strip the URL and keep only the ID like P32575 or G688)

the character start and end positions in the final cleaned text

Convert the data into spaCy training format.
For each document, produce:

the full cleaned text

a list of entity spans with:

start position

end position

kb_id

Be careful with character offsets.
Do not extract the text first and then try to guess positions afterward.
Build the text while parsing the XML so that span positions remain correct.
Incorrect offsets will break spaCy training.
